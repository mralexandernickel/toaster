// Generated by CoffeeScript 1.9.0
(function() {
  var methods, vars,
    __slice = [].slice;

  window.µ = window.µ || {};

  vars = {
    script: null,
    container: null,
    priorities: ["default", "info", "success", "warn", "danger"],
    duration: 5000,
    position: "bottom left"
  };

  methods = {
    init: function(options) {
      var ts;
      ts = document.getElementById("ts");
      if (ts.getAttribute("data-position") != null) {
        vars.position = ts.getAttribute("data-position");
      }
      if (ts.getAttribute("data-duration") != null) {
        vars.duration = parseInt(ts.getAttribute("data-duration"));
      }
      if (!vars.container) {
        vars.container = document.createElement("div");
        vars.container.className += "toaster " + vars.position;
        document.body.appendChild(vars.container);
      }
      return console.log(vars);
    },
    add_toast: function(priority, text, duration) {
      var toast;
      if (duration == null) {
        duration = vars.duration;
      }
      toast = document.createElement("div");
      toast.classList.add("toast", "" + priority, "out");
      toast.textContent = text;
      vars.container.appendChild(toast);
      return window.setTimeout(function() {
        toast.classList.remove("out");
        return setTimeout(function() {
          toast.addEventListener("transitionend", function() {
            return vars.container.removeChild(toast);
          });
          return toast.classList.add("out");
        }, duration);
      }, 1);
    }
  };

  µ.toaster = function() {
    var method, options;
    method = arguments[0], options = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    if (methods[method]) {
      return methods[method](options);
    } else if (vars.priorities.indexOf(method) >= 0) {
      return methods.add_toast(method, options[0]);
    } else if (typeof method === "object" || !method) {
      return methods.init(arguments);
    } else {
      return console.log("so WHAT EXACTLY you want me to do now, huh?!....");
    }
  };

  document.body.addEventListener("click", function(e) {
    if (e.target.getAttribute("data-toggle") === "toast") {
      return µ.toaster(e.target.getAttribute("data-priority"), e.target.getAttribute("data-message"));
    }
  });

  µ.toaster();

}).call(this);
