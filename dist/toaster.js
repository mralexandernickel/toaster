// Generated by CoffeeScript 1.9.0
(function() {
  var methods, vars,
    __slice = [].slice;

  window.µ = window.µ || {};

  vars = {
    container: null,
    states: ["default", "info", "success", "warn", "danger"],
    duration: 5000
  };

  methods = {
    init: function(options) {
      if (!vars.container) {
        vars.container = document.createElement("div");
        vars.container.classList.add("toaster");
        return document.body.appendChild(vars.container);
      }
    },
    add_toast: function(priority, text) {
      var toast;
      toast = document.createElement("div");
      toast.classList.add("toast", "" + priority, "out");
      toast.textContent = text;
      vars.container.appendChild(toast);
      return window.setTimeout(function() {
        toast.classList.remove("out");
        return setTimeout(function() {
          toast.addEventListener("transitionend", function() {
            return vars.container.removeChild(toast);
          });
          return toast.classList.add("out");
        }, vars.duration);
      }, 1);
    }
  };

  µ.toaster = function() {
    var method, options;
    method = arguments[0], options = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
    if (methods[method]) {
      return methods[method](options);
    } else if (vars.states.indexOf(method) >= 0) {
      return methods.add_toast(method, options[0]);
    } else if (typeof method === "object" || !method) {
      return methods.init(arguments);
    } else {
      return console.log("so WHAT EXACTLY you want me to do now, huh?!....");
    }
  };

  µ.toaster();

  document.body.addEventListener("click", function(e) {
    if (e.target.getAttribute("data-toggle") === "toast") {
      return µ.toaster(e.target.getAttribute("data-priority"), e.target.getAttribute("data-message"));
    }
  });

}).call(this);
